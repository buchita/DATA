
DROP TABLE TIME_TABLE;
DROP TABLE ROOM_TABLE;
DROP TABLE SESSION_TABLE;
DROP TABLE DAY_TABLE;
DROP TABLE MODULE_TABLE;
DROP TABLE CLASS_TABLE;


--1
CREATE TABLE CLASS_TABLE
(
COURSE_CODE VARCHAR(5)PRIMARY KEY,
STAGE_NUM NUMBER(1) NOT NULL
CHECK (STAGE_NUM IN (1,2,3,4))
);

--2
CREATE TABLE MODULE_TABLE
(
CRN NUMBER(5) PRIMARY KEY,
MOD_NAME VARCHAR(20) NOT NULL,
MODE_TYPE VARCHAR(20) NOT NULL
CHECK (MODE_TYPE IN('Single-Semester','single-semester','single semester','Single Semester','Single semester','Linked-Semester','linked-semester','linked semester','Linked Semester','Linked semester')),
CONTACT_HOUR NUMBER(2) NOT NULL,
COURSE_CODE VARCHAR(5) NOT NULL,
FOREIGN KEY(COURSE_CODE) REFERENCES CLASS_TABLE(COURSE_CODE)
--LECTURER_ID
);


--3
CREATE TABLE DAY_TABLE
(
DAY_NAME VARCHAR(20) PRIMARY KEY
);


--4
CREATE TABLE SESSION_TABLE
(
SESSION_ID VARCHAR(5) PRIMARY KEY,
CRN NUMBER(5) NOT NULL,
FOREIGN KEY(CRN) REFERENCES MODULE_TABLE(CRN),
DAY_NAME VARCHAR(20) NOT NULL,
FOREIGN KEY(DAY_NAME) REFERENCES DAY_TABLE(DAY_NAME)
);

--5
CREATE TABLE TIME_TABLE
(
START_TIME VARCHAR(20) NOT NULL,
END_TIME VARCHAR(20)NOT NULL,
ROOM_NUM VARCHAR(7) UNIQUE NOT NULL,
DAY_NAME VARCHAR(20) NOT NULL,
FOREIGN KEY(DAY_NAME) REFERENCES DAY_TABLE(DAY_NAME)
);

CREATE TABLE ROOM_TABLE
(
R_NUM VARCHAR(7) PRIMARY KEY,

R_LOCATION VARCHAR(3) NOT NULL
CHECK(R_LOCATION IN('A','KE','KA')),

ROOM_TYPE VARCHAR(10) NOT NULL
CHECK(ROOM_TYPE IN('Lab','Classroom')),

ROOM_CAPACITY NUMBER(2) NOT NULL,

ROOM_BOOKED VARCHAR(3) NOT NULL
CHECK(ROOM_BOOKED IN('YES','NO','Yes','No','yes','no')),

BLACKBOARD VARCHAR(3) NOT NULL
CHECK(BLACKBOARD IN('YES','NO','Yes','No','yes','no')),

WHITEBOARD VARCHAR(3) NOT NULL
CHECK(WHITEBOARD IN('YES','NO','Yes','No','yes','no')),

DATASCREEN VARCHAR(3) NOT NULL
CHECK(DATASCREEN IN('YES','NO','Yes','No','yes','no')),

DATAPROJECTOR VARCHAR(3) NOT NULL
CHECK(DATAPROJECTOR IN('YES','NO','Yes','No','yes','no'))
);


--DO THE ONE-TO-ONE RELATIONSHIP
--R_NUM AND ROOM_NUM ARE THE SAME
ALTER TABLE TIME_TABLE
ADD CONSTRAINT FK_TIME_ROOM_NUM
FOREIGN KEY(ROOM_NUM)
REFERENCES  ROOM_TABLE(R_NUM);
